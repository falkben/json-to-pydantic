<html data-bs-theme="dark">
  <head>
    <!-- pyscript -->
    <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
    <script defer src="https://pyscript.net/latest/pyscript.js"></script>

    <!-- Bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
      crossorigin="anonymous"
    ></script>

    <!--Prism-->
    <link
      id="import-theme"
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/themes/prism-tomorrow.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/plugins/autoloader/prism-autoloader.min.js"></script>

    <!-- code-input -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/WebCoder49/code-input@1.1/code-input.min.css"
    />
    <script src="https://cdn.jsdelivr.net/gh/WebCoder49/code-input@1.1/code-input.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/WebCoder49/code-input@1.1/plugins/indent.js"></script>
  </head>
  <body>
    <!-- prettier-ignore -->
    <py-config>
      packages = [
        "pyyaml",
        "Jinja2",
        "pydantic",
        "https://files.pythonhosted.org/packages/0c/51/1f7f93c0555eaf4cbb628e26ba026e3256174a45bd9397ff1ea7cf96bad5/black-22.12.0-py3-none-any.whl",
        "https://files.pythonhosted.org/packages/35/f0/f3f36d0a87d4f2e3ceb9ba273cac9ad6fb0924f078e51c94803f10b55dbf/PySnooper-1.1.1-py2.py3-none-any.whl",
        "https://files.pythonhosted.org/packages/91/3b/a63bafb8141b67c397841b36ad46e7469716af2b2d00cb0be2dfb9667130/isort-5.11.4-py3-none-any.whl",
        "https://files.pythonhosted.org/packages/44/6f/7120676b6d73228c96e17f1f794d8ab046fc910d781c8d151120c3f1569e/toml-0.10.2-py2.py3-none-any.whl",
        "https://files.pythonhosted.org/packages/df/d8/3e1a32d305215166f5c32652c473aa766bd7809cd10b34c544dbc31facb5/inflect-5.6.2-py3-none-any.whl",
        "wheels/genson-1.2.2-py2.py3-none-any.whl",
      ]

      terminal=false
    </py-config>

    <py-script src="main.py"></py-script>

    <main class="container">
      <div class="position-relative">
        <div
          class="position-absolute mt-2 top-0 end-0 d-flex align-items-center"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            fill="currentColor"
            class="bi bi-lightbulb mx-2"
            viewBox="0 0 16 16"
          >
            <path
              d="M2 6a6 6 0 1 1 10.174 4.31c-.203.196-.359.4-.453.619l-.762 1.769A.5.5 0 0 1 10.5 13a.5.5 0 0 1 0 1 .5.5 0 0 1 0 1l-.224.447a1 1 0 0 1-.894.553H6.618a1 1 0 0 1-.894-.553L5.5 15a.5.5 0 0 1 0-1 .5.5 0 0 1 0-1 .5.5 0 0 1-.46-.302l-.761-1.77a1.964 1.964 0 0 0-.453-.618A5.984 5.984 0 0 1 2 6zm6-5a5 5 0 0 0-3.479 8.592c.263.254.514.564.676.941L5.83 12h4.342l.632-1.467c.162-.377.413-.687.676-.941A5 5 0 0 0 8 1z"
            />
          </svg>
          <span class="form-check form-switch">
            <label class="form-check-label" for="lightSwitch"></label>
            <input class="form-check-input" type="checkbox" id="lightSwitch" />
          </span>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            fill="currentColor"
            class="bi bi-lightbulb-fill"
            viewBox="0 0 16 16"
          >
            <path
              d="M2 6a6 6 0 1 1 10.174 4.31c-.203.196-.359.4-.453.619l-.762 1.769A.5.5 0 0 1 10.5 13h-5a.5.5 0 0 1-.46-.302l-.761-1.77a1.964 1.964 0 0 0-.453-.618A5.984 5.984 0 0 1 2 6zm3 8.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1l-.224.447a1 1 0 0 1-.894.553H6.618a1 1 0 0 1-.894-.553L5.5 15a.5.5 0 0 1-.5-.5z"
            />
          </svg>
        </div>
      </div>

      <h1 class="text-center">JSON to Pydantic</h1>

      <p class="text-center">
        Enter JSON to convert to a
        <a href="https://docs.pydantic.dev/">pydantic</a> model!
      </p>

      <div class="row align-items-center">
        <div class="col">
          <h2 class="text-center">
            <label for="json-ta">JSON</label>
          </h2>
          <code-input
            id="json-ta"
            lang="JSON"
            style="height: 500px; resize: both; overflow: hidden"
            placeholder="Enter JSON"
            py-input="convert()"
            value='{
  "a": "b",
  "c": 123
}'
          ></code-input>
        </div>

        <div class="col">
          <h2 class="text-center">
            <label for="pydantic-ta">Pydantic</label>
          </h2>
          <code-input
            id="pydantic-ta"
            lang="Python"
            style="height: 500px; resize: both; overflow: hidden"
            placeholder="Model output"
            value=""
          ></code-input>
        </div>
      </div>

      <div class="d-flex justify-content-center">
        <div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              value=""
              id="all_optional_checkbox"
              py-change="convert()"
            />
            <label class="form-check-label" for="all_optional_checkbox">
              Specify every field as Optional
            </label>
          </div>

          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              value=""
              id="snake_case_field_checkbox"
              py-change="convert()"
            />
            <label class="form-check-label" for="snake_case_field_checkbox">
              Alias camelCase fields as snake_case
            </label>
          </div>
        </div>
      </div>

      <section class="pt-4">
        <h3>About this tool</h3>
        <p>
          Created by <a href="https://github.com/falkben/">Ben Falk</a> using
          <a href="https://pyscript.net/">pyscript</a> and the Python library
          <a href="https://github.com/koxudaxi/datamodel-code-generator"
            >datamodel-code-generator</a
          >, JSON is converted locally and never leaves your browser. Open
          source at
          <a href="https://github.com/falkben/json-to-pydantic/"
            >github.com/falkben/json-to-pydantic/</a
          >. Heavily inspired by
          <a href="https://github.com/brokenloop/jsontopydantic"
            >github.com/brokenloop/jsontopydantic</a
          >.
        </p>
      </section>
    </main>

    <script>
      codeInput.registerTemplate(
        "code-input",
        codeInput.templates.prism(Prism, [new codeInput.plugins.Indent()])
      );
    </script>
    <script src="js/color_modes.js"></script>
  </body>
</html>
